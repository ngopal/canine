<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>Canine Visualization</title>
    <style>
        .leftcontainer {
            float: left;
            clear: left;
        }
        .rightcontainer {
            float: right;
            clear: right;
        }
    </style>
</head>
<body>

<script src="node_modules/d3/d3.min.js"></script>
<script src="node_modules/d3-svg-legend/d3-legend.min.js"></script>
<script src="node_modules/colorbrewer/colorbrewer.js"></script>
<script src="node_modules/jquery/dist/jquery.min.js"></script>
<script src="node_modules/jquery.tipsy/src/jquery.tipsy.js"></script>
<link href="node_modules/jquery.tipsy/src/jquery.tipsy.css" rel="stylesheet" type="text/css" />
<script src="js/color.js"></script>
<script type="text/javascript">

    var vectorBioDistToSVGPart = {
        "biceps_brachii" : "Biceps brachii M",
        "deltoid" : "Deltoideus M",
        "flexor_carpi_ulnaris" : "flexor carpi ulnaris",
        "ulnaris_lateralis" : "Ulnaris lateralis M",
        "extensor_digitorum_communis" : "Ext digit communis M",
        "Biceps_femoris" : "Biceps femoris M",
        "gastrocnemius" : "Gastrocnemius M",
        "extensor_digitorum_longus" : "Ext digito longus M",
        "Rhomboid_cervicus" : "Rhomboideus cerv M",
        "triceps" : "Triceps brachii M",
        "pronator_teres" : "Pronator teres M",
        "extensor_digiti_lateralis" : "Ext digit lateralis M",
        "extensor_carpi_radialis" : "Ext carpi radialis M",
        "Tibialis_cranialis" : "Tibialis cranialis M",
        "flexor_digitorum_superficialis" : "Flexor digit superf M",
        "soleus" : "Soleus M",
        "supraspinatus" : "Supraspinatus M",
        "infraspinatus" : "Infraspinatus M",
        "paravertebrals" : "Paravertebral lumb M",
        "anconeus" : "Anconeus M",
        "flex_carpi_radialis" : "Flexor carpi radialis M",
        "abductor_pollicus_longus" : "Abduct pollicis long M",
        "flexor_digitorum_profundus" : "Flexor digit profundus M",
        "heart" : "Heart left ventricle",
        "liver" : "Liver left lobe",
        "lungs" : "Lung",
        "spleen" : "Spleen",
        "kidney" : "Kidneys",
        "brain" : "B L hem cerebellum"
    };

    var anatomyToSVGPart = {
        "heart" : "Heart LV",
        "liver" : "Liver",
        "lungs" : "Lung",
        "spleen" : "Spleen",
        "kidney" : "Kidneys",
        "brain" : "Brain"
    };

    var rainbowColorScale = getRainbowScale();
    var RedColorScale = getRedScale();
    var scaleChoice = RedColorScale;

    function median(values) {

        values.sort( function(a,b) {return a - b;} );

        var half = Math.floor(values.length/2);

        if(values.length % 2)
            return values[half];
        else
            return (values[half-1] + values[half]) / 2.0;
    }

    // Let's read in some data
    var wbdata = [];
    var vdata = [];
    d3.csv("data/SNBL08901_cMTM1-vector_biodistribution.csv", function(verror, vector) {
        if (verror !== null) {
            alert(verror);
        }
        else {
            vdata = vector;
            vdata = vdata.filter(function(n) {
                return n.Part !== "";
            });
//
//            var dog_1 = renderDog("organ","dog_1","window_1");
//            var dog_2 = renderDog("deep","dog_2","window_2");
//            var dog_3 = renderDog("middle","dog_3","window_3");
//            var dog_4 = renderDog("superficial","dog_4","window_4");
//            var dog_5 = renderDog("superficial","dog_5","window_5");
//            var dog_6 = renderDog("superficial","dog_6","window_6");
//            var dog_7 = renderDog("superficial","dog_7","window_7");


            var superficial_dogs = [];
            var deep_dogs = [];
            var middle_dogs = [];
            var organ_dogs = [];
            var numDogs = 4
            for (var i = 0; i < numDogs; i++) {
                superficial_dogs.push(renderDog("superficial","dog_"+i,"window_"+i));
                middle_dogs.push(renderDog("middle","dog_"+(i+numDogs),"window_"+(i+numDogs)));
                deep_dogs.push(renderDog("deep","dog_"+(i+numDogs*2),"window_"+(i+numDogs*2)));
                organ_dogs.push(renderDog("organ","dog_"+(i+numDogs*3),"window_"+(i+numDogs*3)));
            }


            var svgs = d3.selectAll("svg").attr("width", "25%").attr("height", "100%");

            var deepMuscleGroup = d3.selectAll("#deep_muscle_group").style("opacity", 0.7);
            var organGroup = d3.selectAll("#organ_group").style("opacity", 0.7);
            var middleMuscleGroup = d3.selectAll("#middle_muscle_group").style("opacity", 0.7);
            var superficialMuscleGroup = d3.selectAll("#superficial_muscle_group").style("opacity", 0.7);

            var min_dog_fill = [];
            var average_dog_fill = [];
            var median_dog_fill = [];
            var max_dog_fill = [];
            var dog_labels = [];
            var dog_names = ["Right_SSAN_2","Right_SSAN_4","Right_SSAN_7","Right_SSAN_8","Right_SSAN_9","Right_SSAN_10","Right_SSAN_11","Right_SSAN_12","Right_SSAN_13","Right_SSAN_14","Right_SSAN_16","Right_SSAN_18","Right_SSAN_103","Right_SSAN_104","Right_SSAN_106","Right_SSAN_123","Right_SSAN_132",
                "Left_SSAN_2","Left_SSAN_4","Left_SSAN_7","Left_SSAN_8","Left_SSAN_9","Left_SSAN_10","Left_SSAN_11","Left_SSAN_12","Left_SSAN_13","Left_SSAN_14","Left_SSAN_16","Left_SSAN_18","Left_SSAN_103","Left_SSAN_104","Left_SSAN_106","Left_SSAN_123","Left_SSAN_132"];
            var averages = {};
            var medians = {};
            var minimum = {};
            var maximum = {};

            // Calculate summary stats for each body part across all right side dogs
            vdata.map(function(v) {
                var sum_for_part = 0;
                var denom = 0;
                var min = 1;
                var max = 0;
                var med = [];
                for (var k = 0; k < dog_names.length; k++) {
                    if (v[dog_names[k]] !== "") {
                        //console.log([sum_for_part, v[dog_names[k]], dog_names[k]])
                        var value = +v[dog_names[k]]
                        sum_for_part = sum_for_part + value;
                        denom = denom + 1;
                        // should clarify with David how I should count the mean. Should blanks be counted?
                        if (value < min) {
                            min = value;
                        }
                        if (value > max) {
                            max = value;
                        }
                        med.push(value);
                    }
                }
                averages[v.Part] = sum_for_part/denom;
                minimum[v.Part] = min;
                maximum[v.Part] = max;
                medians[v.Part] = median(med);
            });

            console.log(averages);
            console.log(minimum);
            console.log(maximum);
            console.log(medians);


            min_dog_fill.push(makeAverageDog(".dog_"+0, minimum));
            min_dog_fill.push(makeAverageDog(".dog_"+4, minimum));
            min_dog_fill.push(makeAverageDog(".dog_"+8, minimum));
            min_dog_fill.push(makeAverageDog(".dog_"+12, minimum));
            average_dog_fill.push(makeAverageDog(".dog_"+2, averages));
            average_dog_fill.push(makeAverageDog(".dog_"+6, averages));
            average_dog_fill.push(makeAverageDog(".dog_"+10, averages));
            average_dog_fill.push(makeAverageDog(".dog_"+14, averages));
            median_dog_fill.push(makeAverageDog(".dog_"+1, medians));  // 1
            median_dog_fill.push(makeAverageDog(".dog_"+5, medians));  // 5
            median_dog_fill.push(makeAverageDog(".dog_"+9, medians)); // 9
            median_dog_fill.push(makeAverageDog(".dog_"+13, medians)); // 13
            max_dog_fill.push(makeAverageDog(".dog_"+3, maximum));
            max_dog_fill.push(makeAverageDog(".dog_"+7, maximum));
            max_dog_fill.push(makeAverageDog(".dog_"+11, maximum));
            max_dog_fill.push(makeAverageDog(".dog_"+15, maximum));

//            middle_dogs_fill.push(makeAverageDog(".dog_"+(i+numDogs*2), averages));
//            deep_dogs_fill.push(makeAverageDog(".dog_"+(i+numDogs), medians));
//            organ_dogs_fill.push(makeAverageDog(".dog_"+(i+numDogs*3), maximum));
//            dog_labels.push(addLabel(".window_"+i, "Min"));
//            dog_labels.push(addLabel(".window_"+(i+numDogs*2), "Mean"));
//            dog_labels.push(addLabel(".window_"+(i+numDogs), "Median"));
//            dog_labels.push(addLabel(".window_"+(i+numDogs*3), "Max"));

//            var superficial_dogs_fill = makeAverageDog(".dog_0", averages);
//            var middle_dogs_fill = makeAverageDog(".dog_1", averages);
//            var deep_dogs_fill = makeAverageDog(".dog_2", averages);
//            var organ_dogs_fill = makeAverageDog(".dog_3", averages);
//            var dog_labels1 = addLabel(".window_1", "Superficial Muscles");
//            var dog_labels2 = addLabel(".window_2", "Middle Muscles");
//            var dog_labels3 = addLabel(".window_3", "Deep Muscles");
//            var dog_labels4 = addLabel(".window_4", "Organ Muscles");
            dog_labels.push(addLabel(".window_"+0, "Min"));
            dog_labels.push(addLabel(".window_"+1, "Median"));
            dog_labels.push(addLabel(".window_"+2, "Mean"));
            dog_labels.push(addLabel(".window_"+3, "Max"));



        }
    });

//    function makeDog(dogClassName,dogFileName) {
//        return d3.selectAll(dogClassName)
//                .attr("fill", function() {
//                    var svgPart = this.id;
//                    if (anatomyToSVGPart[svgPart] !== undefined) {
//                        var data_to_use = wbdata.filter(function(n) {
//                            return n.GENETHON === anatomyToSVGPart[svgPart];
//                        });
//                        var value_to_use_for_color;
//                        if (isFinite(data_to_use[0][dogFileName])) {
//                            value_to_use_for_color = +data_to_use[0][dogFileName];
//                            if (value_to_use_for_color > 1) {
//                                value_to_use_for_color = 1;
//                            }
//                            return scaleChoice(value_to_use_for_color);
//                        }
//                        else {
//                            // In the case of an "ND" value
//                            return "none"
//                        }
//                    }
//                    else {
//                        return "none";
//                    }
//                });
//    }

    function makeAverageDog(dogClassName, avgObj) {
        return d3.selectAll(dogClassName)
                .attr("fill", function() {
                    var svgPart = this.id;
                    if (vectorBioDistToSVGPart[svgPart] !== undefined) {
                        var value = avgObj[vectorBioDistToSVGPart[svgPart]];
                        if (value > 1) {
                            value = 1;
                        }
                        return scaleChoice(value);
                    }
                    else {
                        return "none";
                    }
                });
    }

    function addLabel(window, label) {
        return d3.selectAll(window)
                .append("text")
                .attr("x", "35%")
                .attr("y", "10%")
                .attr("font-size", 100)
                .text(label);
    }


    function renderDog(dogType,dogNumber,windowNumber) {


		var groupid = {
			"organ":"organ_group",
			"deep":"deep_muscle_group",
			"middle":"middle_muscle_group",
			"superficial":"superficial_muscle_group"
		};

        var organ_coordinates = [
            {"name":"kidney",
                "d":"M705.6,328.1c19.2-0.4,36.1,6.5,48,14.2 c6,3.9,12.1,6.9,12.7,15.4c0.7,9.1-7.5,13-12.2,17c-8.2,6.9-16.8,13.8-28.8,16.8c-7.9,2-17,1-25.7,2.4c-7.3,1.2-16.8,2.9-23.8,0 c-9.9-4.1-22.9-25.2-14.6-38.9c6.6-10.8,21.3-19.5,33.6-24.5C698.4,329.7,702,328.9,705.6,328.1z"},
            {"name":"spleen",
                "d":"M661.2,339.4c5.2,1.1,11.8,0.9,16.3,3.8 c5.1,3.3,9.3,8.3,13,13c9.5,12.1,20.4,21.8,25,39.1c2.2,8.6,1.7,21.1,1,27.8c-1.2,10.4,2.6,19.3,0.5,29 c-3.6,16.6-19.8,25.6-37.7,27.8c-7.5,1-20.1,2.2-27.6-0.2c-16.9-5.6-27.5-21.4-36-35.5c-5.2-8.6-13-21.9-9.4-36.5 c5.8-23.5,24.2-52.7,41.8-64.3C651.9,340.8,656.7,341.2,661.2,339.4z"},
            {"name":"liver",
                "d":"M599,349.4c27.2-0.1,36.1,16.7,45.6,34.6 c8.7,16.4,17.2,32.1,21.4,53.3c4,20.6-6.2,47.6-10.3,63.8c-1.9,7.7-1.7,15.8-4.1,22.8c-6.7,19.9-20.1,27.8-42.5,32.4 c-3.4,0.7-19.4,1.9-23.5,0.7c-13-3.7-26.7-3.4-37.2-8.9c-22.6-11.7-37.5-47.2-44.4-74.9c-3.3-13.1-2.7-31.3,1.9-42.2 c4.2-9.8,10.9-16.8,16.8-24.7c15.6-20.7,34-39.8,58.3-51.6c3.8-1.4,7.5-2.9,11.3-4.3C594.6,350.1,596.8,349.8,599,349.4z"},
            {"name":"heart",
                "d":"M379,454.8c1,3.4,1.9,6.7,2.9,10.1 c1.9,4.4,13.3,16.7,20.9,13.7c1-1.6,2.1-3.2,3.1-4.8c3.5-5.1,9.1-9.4,15.4-11.8c12.1-4.5,27.1,0.5,36.5,4.1 c3.6,1.4,7.7,1.5,11.8,2.6c8.9,2.4,21.1,6.7,26.2,13.2c7,8.9,7.9,21.8,12,33.8c3.9,11.3,14.2,17.9,7.4,33.1 c-5.7,12.7-30.6,13.7-46.3,9.1c-9-2.6-18.4-2.9-26.2-6.2c-6.9-3-10.7-9.2-16.8-12.7c-9.2-5.3-17.8-7.7-23.8-16.1 c-2.3-3.2-4.9-7.8-6-11.8c-0.3-2.9-0.6-5.8-1-8.6c-14.7-2.9-26.2-13-32.9-24.2c-1.9-3.1-5.8-9.6-5-13.9 C364.4,461.2,371.7,458,379,454.8z"},
            {"name":"lungs",
                "d":"M628.1,340.6c3.6,11.1-11.1,49.5-12,52.3 c-16.7,41.8-35.9,98.5-56.2,118.3c-8.9,16-8.9,23.6-22.6,31.4c-19.5,15.1-84.1-14.5-128.4-31.2c-15.7-8-29-19.8-43.7-29 c-8.4-4.9-15.6-12.4-26.9-13.7c-13.6-6-16.6-17.8-11.3-28.6c2.8-5.8,10.9-7.7,16.3-11c1.8-1.1,52.3-41.2,80.4-54.2 c23.2-10.8,53.8-17.7,81.6-23.3c18.7-3.7,39.2-1.1,59-3.8C591.9,348,613.8,335.7,628.1,340.6z"},
            {"name":"brain",
                "d":"M258.5,73.9c6.1,2.3,10.1,9.8,7.2,17 c5.1,1.8,3.9,14.8,0.2,17.5c-2.5,0.9-5,1.8-7.4,2.6c-0.8-0.9,7.2,5.6,9.1,9.8c-1.9,0.6-5.3,3.5-6.7,2.6c-3.1-1.9-7-6.6-7.9-10.6 c-5.7-1-8.7-5-12.5-7.9c-8.4,3.9-22,1.6-29.5-1.7c-1.4-1-2.9-1.9-4.3-2.9c-6.4-1.2-31.2-1.8-29-16.1c4.2-6.2,29.3-6.7,47-9.8 C235,74,254.2,72.3,258.5,73.9z"}];

        var vec1 = [
                
        ];


        var vec2 = [
            {"name":"zygomaticus", "d":"M297.4,110.2c0.6,0.1,1.1,0.2,1.7,0.2 c-0.2,0.2-0.3,0.5-0.5,0.7c-4.8,1.9-8.6,6.1-12.5,9.1c-19.3,15.3-31.5,37.5-46.6,57.1c-5.6,7.3-13,12-19.9,18 c-6.6,5.7-12.1,14.5-16.8,22.1c-3.9-1.7-7.4-3.6-10.6-6c0-0.4,0-0.8,0-1.2c2.1-4.1,7.8-6.8,11.3-9.6c2.7-3.2,5.4-6.4,8.2-9.6 c5.4-5.4,10.7-10.7,16.1-16.1c8.1-10,15.3-21.2,23.3-31.4c3.5-4.5,8.3-7.9,11.8-12.2c4.1-5.3,8.2-10.6,12.2-15.8 C282.5,113.7,290,111.9,297.4,110.2z"},
            {"name":"orbicularis_orbis", "d":"M226.6,85.2c5.6,0.2,7.9,3.8,10.3,7.2 c3.3,4.5,7.2,9.9,8.4,16.3c2.7,13.8-9,33.9-23.3,31.4c-6.3-1.1-14.5-2-17.3-6.7c-1.2-2-1.4-5.8-1-8.6c0.2-3.4,0.3-6.9,0.5-10.3 c1.3-5.6,4.7-9.4,6.7-14.2c1.8-4.2,2.2-8.8,5.5-11.3C219.4,86.9,223.1,86.8,226.6,85.2z M229.2,102.2c1.2,2.6,4.1,5.6,4.7,9.2 c1.1,7.7-7.2,18.8-10.9,17.4c-2.6-0.9-5.3-1.2-8.3-2.3c-1.1-0.4,0.1-4.2,0.2-5.8c0.1-1.9,1.1-3.1,1.2-5c0.5-3.1,3.5-4.1,4.3-6.7 c0.8-2.3,1.5-8.2,2.9-9.6C225.9,96.8,227.3,98.2,229.2,102.2z"},
            {"name":"sternohyoideus", "d":"M316.1,215.8c7.6,0.5,10.7,9.9,13.2,15.6 c7.6,17.3,19,58.1,19.4,59.8c4.9,13.9,9.8,27.8,14.6,41.8c9.7,25.1,18.6,51.5,25.4,79.2c1.8,7.1,0.2,16.3,1.4,24.2 c2.5,15.7,2.7,30.9,6.7,44.6c8.8,29.9,23.2,68,31.2,82.6c-0.2-0.1-0.3-0.2-0.5-0.2c-8.6-12.4-29.3-46.4-39.8-79.7 c-3.4-10.8-4.6-22.3-6.7-35c-2.4-14.1-1.2-28.4-4.3-40.8c-3.4-13.4-9.3-25.6-14.4-37.7c-7.5-17.9-15-35.8-22.6-53.8 c-8.4-19.4-24.6-63.2-25.2-64.3c-3-5.7-13.3-19.5-12-26.9C303.3,224.4,311.6,218.8,316.1,215.8z"},
            {"name":"sternomastoideus", "d":"M337.5,83.3c10.2-0.2,17.8,3.8,25.2,7 c4.2,38.5,8.5,77,12.7,115.4c3.4,31.9,6.7,63.8,10.1,95.8c2.2,22.2,4.5,44.5,6.7,66.7c1.3,13.5,2.6,27,3.8,40.6 c2.1,23.8,4.2,47.7,6.2,71.5c-0.1,0-0.2,0-0.2,0c-2.1-9-4.2-18.1-6.2-27.1c-3.7-14.3-6.2-28.7-10.1-42.5 c-6.2-22.4-11.5-44-18.2-65.5c-15.5-49-32.9-95.9-48.5-145.7c-4.8-15.5-7.8-30.9-11.3-47.8c-1.4-6.8-3.7-17.1-1.9-25.4 c2.4-11.3,11.3-17.5,17-25.7C327.5,94,330.2,87.3,337.5,83.3z"},
            {"name":"bracheocephalis", "d":"M362.7,90.7c1.8,1.7,3.7,3.4,5.5,5 c7.1,5.7,12.9,13,19.9,18.7c6.4,5.2,13,11.6,18.2,18c5.5,5.8,11,11.7,16.6,17.5c12.6,15.9,25.1,32,36.7,49 c-14.3,45.6-23.5,93.5-35.5,141.4c-3.3,16.5-6.6,33-9.8,49.4c-2.8,12.3-7,34.7-4.6,49c0.6,3.4-0.2,22.5-0.2,22.6 c0,0.2,0,0.3,0,0.5c-0.1,0-0.2,0-0.2,0c0-0.6,0-1.3,0-1.9c-8.5,0-10.2,9.7-12.7,16.1c-0.9-3.9-1.8-7.8-2.6-11.8 c-0.4-9-0.8-17.9-1.2-26.9c-1.4-19.1-2.7-38.2-4.1-57.4C380,283.6,371.3,187.1,362.7,90.7z"},
            {"name":"lower_trapezius", "d":"M541,273.6c11.9,2.4,23.8,4.8,35.8,7.2 c30.9,6.8,64.1,10.3,97.2,14.9c0,0.1,0,0.2,0,0.2c-18.1,4.8-36.2,9.6-54.2,14.4c-32.9,9.7-67.8,15.7-98.2,28.1 c-43.5,17.7-69.5,34.8-67.9,33.8c-6.5,8.3,38.5-51.8,52.3-68.2C515.7,292.1,529.5,283.8,541,273.6z"},
            {"name":"upper_trapezius", "d":"M459.4,198.7c-10.5-12.4,34.5,41.8,55.9,64.6 c8.1,8.6,23,10.8,24,11c-0.2,0-0.3,0-0.5,0c-15.8,10-23.9,19.4-37.4,34.1c-29.8,33.4-54.5,76.9-56.2,81.1c-0.1,0-0.2,0-0.2,0 c-1-7.3-4.1-53.4-4.1-70.1C441.9,274.5,455.6,214.3,459.4,198.7z"},
            {"name":"biceps_brachii", "d":"M417.4,447.9c0,0-3.8,8.5-4.3,24 c-0.5,14.9,1.2,21.6,1.2,21.6s11.1,29.5,34.1,66c19.9,31.6,48.7,64.4,52.1,77.8c2.4,7.9,30.5,32.5,36.5,37 c6.3,4.7-2.4,10.6-2.4,10.6l-24.5-30.2c0,0,8.2,14.8,10.3,22.8c2.1,8-5.5,4.3-5.5,4.3s3-13-18-39.8c-4-5.1-19.8-17.7-33.2-31.4 c-16.2-16.6-23.6-25.6-35-42.1c-10.1-14.5-25.6-41.9-18.5-73.9c-3.9-25.4,1-45.4,1-45.4L417.4,447.9z"},
            {"name":"deltoid", "d":"M501.7,306.7c0.6,5.2,1.3,10.4,1.9,15.6 c-0.6-3.6,11.5,74.4,0,125.3c-18.6,82-47.9,99.8-54.5,105.1c-0.2-0.2-0.5-0.3-0.7-0.5c-1.6-4.1-5-7.1-6.5-11.5 c-0.1,0-0.2,0-0.2,0c-2.4,7.1-4.8,14.2-7.2,21.4c-17.1-19.4-15.2-32.3-15.4-33.8c-2.3-12.8-2.2-26-4.3-40.1 c-0.8-5.1-2-26.4-0.5-31c13.6-19.8,18.3-45.2,14.9-40.8c6.3-8,1.5-2.6,4.8-5.8c5.4-11.9,10.3-25.9,17.8-36.2c3.8-4,7.5-8,11.3-12 c8.5-10.9,16.2-22.3,24.2-33.8C492.1,321.3,496.9,314,501.7,306.7z"},
            {"name":"triceps", "d":"M514.6,380.1c13.8,0.2,17.1,20,21.4,30.5 c1,2.5,11.8,28.3,14.2,40.3c0.6,6.2,1.3,12.3,1.9,18.5c2.1,8.5,13.4,44,14.4,61c0.5,14.8-1.7,50-1.4,46.8 c5.1,13.7,10,38.2,10.8,43c0.1,2-7.2,13.3-7.2,22.6c-2.3-4.9-15.7-16.3-21.6-17.3c-6.3-1-21.1,4.8-44.6-9.6 c-18.6-11.4-33.9-29.9-47-46.8c-7.1-9.1-15.6-18-20.2-29.5c-1.3-3.3-7.8-39.5-10.3-53.5c0.1,0,0.2,0,0.2,0 c22.3,8.2,43.3,16.2,63.1,26.4c-7.1-9.5-16-17.2-22.3-27.8c-5-8.4-11-25.8-12.5-32.6c-2.1-9.7,7.4-21.1,9.4-24 C476.3,407.4,493.8,393.3,514.6,380.1z"},
            {"name":"flexor_carpi_ulnaris", "d":"M565.7,639.6c1.8,3.3,0.3,9.2,1,13.4 c0.6,11.7,2.4,63.1,2.4,76.8c0.4,26,0.8,52,1.2,78c0.4,10.6,0.8,21.3,1.2,31.9c0.4,7,1.7,29.6,4.7,45.6 c1.4,7.6-4.7,12.2-5.4,10.1c-1.1-3.4-2.2-6.7-3.4-10.1c-0.2-1.3-7.5-61.4-8.9-80.6c-1-11.9-1.9-23.8-2.9-35.8 c-0.3-3.2-4.8-67.1-10.6-97C547.5,662.3,560.6,647.7,565.7,639.6z"},
            {"name":"ulnaris_lateralis", "d":"M537.4,641.1c2.7,1.8,3.5,7.5,4.8,10.8 c4.1,10.6,4.1,20.6,6.7,33.1c5.2,25,8.4,61.2,3.6,87.6c3,52.4,6.6,121.5,5.8,103.7c1.3,8,2.1,19.6,0.7,28.3 c-1,6.3,0.2,12.4-2.4,16.8c-0.2,0-0.5,0-0.7,0c-4.4-7.9-1.7-20.7-3.4-31.4c-1.3-17.1-2.6-34.2-3.8-51.4 c-2.4-27.9-5.6-73.2-5.3-67.9c-1.8-6.8-4.3-14.4-6-22.1c-3.9-24.8-6.4-92.1-5.5-95.5C532.8,649.7,536.5,646.1,537.4,641.1z"},
            {"name":"extensor_digitorum_communis", "d":"M500.7,1022.2 c0.2-14.1,17.8-25.6,27.4-31.2c4.4-2.1,8.8-4.2,13.2-6.2c6.3-5.4,5.3-20.1,5-31.2c-0.6-5.1-1.1-10.2-1.7-15.4 c-1.4,11.8,0.5,30.7-4.3,38.6c-3.3,5.4-12.4,6.9-18,10.1c-3.6,2-7.7,5.9-10.3,9.1c-3.3,4.1-17.3,22.1-21.4,23 c-0.2-0.2-0.3-0.3-0.5-0.5c0.3-4.4,4.3-6.9,6.5-9.6c4.3-5.4,8.6-10.7,13-16.1c2.2-3,4.3-7.4,7.4-9.4c3.2-1.2,6.4-2.4,9.6-3.6 c8-3.4,10-9,13-17.5c0.9-2.6,3.3-8.1,2.2-11.3c-0.5,10.3-5.7,21.6-13.4,25c-4.5,2-9.9,2.8-13.7,5.5c-4.5,5.5-9,11-13.4,16.6 c-3,3.8-10.9,14.9-17,13.9c0.1-0.3,0.2-0.6,0.2-1c2.6-2.6,5.1-5.1,7.7-7.7c4.9-5.7,18.5-24.9,21.1-26.6 c4.5-2.9,13.4-1.1,17.8-4.1c3.3-2.3,8.4-25.8,7.9-34.6c-0.2,10.7-5.2,30.8-11.8,34.6c-2.4,1.4-5.9-0.2-9.4,0.5 c-2.6,0.5-5.3,2.2-7.2,3.6c-2.1,2.4-4.2,4.8-6.2,7.2c-5.3,6.6-11.5,12.6-18.7,17.3c-0.6-0.3-1.3-0.6-1.9-1c0-0.4,0-0.8,0-1.2 c3.7-5.6,10.8-8.6,14.9-13.9c3-3.8,4.7-9.9,8.6-12.7c5.3-3.7,13.5-3.1,18.2-4.1c4-0.9,8.8-19.9,10.3-28.1 c2.4-13.1,0.3-32.8-1.7-44.6c-1.3-12.6-2.6-25.3-3.8-37.9c-1.7-18.1-5.7-67.8-7-80.9c-4-24.1-4.8-42.8-8.4-64.3 c0.3,4.2-4-36.5-0.7-56.9c0.8-4.8,3.5-14.1,10.3-12.7c9.3,1.9,7.6,15.1,9.1,25c1.6,10.3,1.4,31.1-0.2,41.3 c-1,15-1.9,29.9-2.9,44.9c-3,18.3-3.3,38.9-0.2,58.1c1,13.8,1.9,27.5,2.9,41.3c2.8,16.6,5,31.6,8.9,47.3c5,20.2,11.3,45,6.5,68.9 c-0.7,4.3-1.4,8.6-2.2,13c-4.4,11-17.7,9.5-26.6,15.8c-8.1,5.7-11.3,16.5-17.8,23.8C501.5,1022.2,501.1,1022.2,500.7,1022.2z"},
            {"name":"extensor_digiti_lateralis", "d":"M526.9,648 c0.9,1.9,1.8,3.8,2.6,5.8c1.5,2,3.7,2.5,4.8,5c3.5,8.3,3.1,18.8,4.8,28.8c2.1,12,4.3,27.4,2.2,40.8c-1.4,8.5-4.2,24-2.6,33.6 c3.3,44.7,14.1,118,13,109.4c4.9,25.7,6.7,56.5,1.4,83.8c-1.8,9.3-2.7,18.9-6,26.9c-4.9,11.9-22.3,9.8-30,18.7 c-3.2,3.7-5.9,9.2-8.9,13.9c-1.7,2.6-3.1,5.2-5.5,6.5c-0.2,0-0.5,0-0.7,0c1.9-3.9,5.3-9.6,8.6-15.1c2.6-4.4,5.1-8.9,7.7-10.8 c7.5-3.4,15-6.7,22.6-10.1c3.5-2.6,5.2-9.2,7-18.5c1.6-8.6,3.9-17.3,4.3-21.4c-2.1,11.4-7.3,28.7-13,33.1 c-3.8,3-8.7,4.2-13.4,6.2c-5.5,2.4-11,8.1-14.4,12.7c-3.6,5-12.8,21.2-19,22.1c-0.7-0.7-0.8-0.7-1-2.2c4.2-4.7,8.3-9.4,12.5-14.2 c4.4-5.8,9.8-14.4,15.6-18.7c5-3.8,11.5-4.8,16.1-7.7c5.5-3.6,11.7-21,12.2-30c-2.5,12.1-7.9,22-15.8,26.9 c-6.5,3.4-10.7,4.2-16.1,6.2c-2.5,2-6.3,9-8.9,13.2c-3.9,6.1-8.7,14.7-14.4,19c-1.7,1.3-4.1,2.3-5,1.9c0.3-1-0.5-1.3,0-1.9 c2.6-3.3,6.8-5.5,9.4-8.6c2.7-3.4,6.4-10.1,9.8-16.1c2.3-4,4.5-8.1,6.5-9.4c7.1-4.6,18.4-5.4,23.5-12 c9.9-12.8,10.3-33.6,13.4-53.3c1.3-7.9-0.2-16.5-1.4-23.3c-0.8-6.9-6.9-57.9-9.1-76.6c-3.5-18.9-6.1-37-9.4-55.2 c-2.4-13.8-0.9-28-3.1-42.5c-0.4-9.7-0.8-19.4-1.2-29C524.2,675,524.4,657.7,526.9,648z"},
            {"name":"Tensor_fascia_latae", "d":"M989.1,313.5c19-0.4,30,7.8,41.3,14.9 c28.8,18.1,70.4,52.1,71,54.2c-17.2,23.9-52.5,49.6-55.9,52.3c-0.2-0.2-0.5-0.3-0.7-0.5c0.5,1.3-4-17.8-7-27.1 c-7.6-24.1-18-45.7-31.4-64.1c-15.7-18.9-21.2-24.3-19.9-27.8C987.1,314.1,987.9,314.1,989.1,313.5z"},
            {"name":"Biceps_femoris", "d":"M1168.6,359.8c4.3,0.6,14.6,5.6,21.1,28.1 c2.4,8.2,0.8,15.9,3.1,30.5c2.7,44.5-1.4,185.8-1.4,204.7c6,37.4,9.3,74,16.3,110.4c2.8,14.3-7.1,40.1-11.5,51.4 c-2.2,5.6-3.7,13.2-8.2,16.6c-0.1,0-0.2,0-0.2,0c-3.4-7.8-12.5-16-17.8-22.6c-13.7-17.2-30.1-31.9-43-49.9 c-29-40.6-56.9-81.1-75.4-132.5c-1-4-23.1-94.4-25-120.7c0.1,0.3-12.8-22.1-0.5-42.2c16.7-27.4,57.3-54.4,91.4-64.8 C1134.8,363.4,1169.8,359.6,1168.6,359.8z"},
            {"name":"gastrocnemius", "d":"M1122.1,606.5c16.4-0.2,27.5,8.9,36.7,16.3 c25.5,20.4,36.8,58.6,46.1,95c4.4,17.1,5.3,35.8,13,49c14.6,25.1,32.5,46.6,49.4,69.1c3.5,4.7,8.1,12,4.8,19.9 c-0.7,1.6-1.1,3-2.9,2.6c-2.8-1.2-8.1-14.9-10.1-18.2c-9.3-15.6-18.5-31.4-28.8-46.1c-6-8.6-12.5-16.9-19-25 c-2.8-2.6-5.6-5.1-8.4-7.7c-5.7-5.7-11.1-12.1-15.8-18.7c-14.6-20.4-25.9-42.8-38.9-65c-6.5-12-13-24-19.4-36 C1126.5,630,1124.3,618.3,1122.1,606.5z"},
            {"name":"flexor_digitorum_superficialis", "d":"M1133.6,665.8 c3.3,1.1,11.3,6.4,13.2,9.6c-12.8-20.8,23.4,32,47.3,83c19.4,31.3,36.3,61.6,45.1,76.8c5.7,9.8,10.7,20.3,15.4,31 c3.4,7.8,7.8,15.8,9.6,25.2c0.5-30.1-3,63.4-2.6,80.9c-1.8,11.2-1.7,21.9-4.1,31.4c-1.4,5.4-2,11.1-4.6,15.4 c-3.2,5.2-10.2,5.7-15.4,8.9c-4.2,3-8.5,6.1-12.7,9.1c-6.7,5.1-13.4,10.2-20.2,15.4c-1.9,1.4-5.1,5.8-8.2,4.8c0.2,0,0.3,0,0.5,0 c11.1-11.6,25-20.5,36-32.2c0-0.2,0-0.5,0-0.7c-0.2-0.1-0.3-0.2-0.5-0.2c-10.6,6.6-21.3,13.3-31.9,19.9c-3.7,2.3-7.8,6.8-13,7.2 c0-0.1,0-0.2,0-0.2c0.3-0.4,0.6-0.8,1-1.2c4.6-3.8,9.3-7.5,13.9-11.3c7.9-5.2,15.8-10.4,23.8-15.6c-11.8,4.4-22.6,10.3-33.6,15.8 c-2.8,1.4-8.6,6.6-12.7,5c0.2,0,0.3,0,0.5,0c12.3-8.5,23.9-18.3,39.6-23.3c11.6-3.7,24.1,0.4,28.8-11c4.3-10.5,2.9-24.1,5-37.2 c0.1-5.3,5.5-71.5,1.4-85.7c-7.1-25.2-21.1-44.4-33.6-64.3c-14.8-23.8-29.8-47-44.6-70.6c-12.1-7-18.7-14.3-25.4-23.8 c-6.2-8.8-27-35.9-30.2-52.1C1120.3,670.9,1127.5,668.8,1133.6,665.8z"},
            {"name":"extensor_digitorum_longus", "d":"M1087.5,642.3 c9.9,0.1,17.4,13.4,21.8,19.7c14.6,20.7,25.6,43.6,38.4,66.5c9.1,18.1,18.2,36.2,27.4,54.2c10.5,13.9,21,27.8,31.4,41.8 c4.4,4.9,8.8,9.8,13.2,14.6c9.2,11.9,17.9,25.3,24.5,39.6c2.7,5.8,3.7,12.5,5.5,19.2c4.4,16.6,7.5,35,12.5,51.8 c5,17,5.3,41,1.4,58.8c-1.6,7.6-0.6,13.6-4.6,18.7c-6.8,8.7-22.8,8.4-29.5,17c-3.5,4.4-11.6,24.9-15.8,25.9 c-0.1-0.1-0.2-0.2-0.2-0.2c0.2-18,18.2-31.9,30-38.9c3.8-2.2,10.1-3.5,13-6.7c9.5-10.6,3.9-39.7,3.6-55.4 c-0.2,0.1-0.3,0.2-0.5,0.2c0.1,11.8,0.5,38.7-3.8,44.9c-4.3,6.1-14.3,7-20.9,11c-2.8,2.5-5.6,5-8.4,7.4 c-5,6.2-10.3,12.3-15.1,18.5c-2.9,3.7-5.7,8.5-9.8,10.8c-0.2-0.1-0.5-0.2-0.7-0.2c-1.3-4.3,8.1-13.2,10.6-16.6 c5.8-8,11.7-16,17.5-24c5.3-2.1,10.6-4.2,15.8-6.2c6-3.6,7.6-10.3,9.8-17.8c0.8-2.7,3.6-9.7,2.2-13c-0.5,11.9-5.9,23.8-13.9,28.6 c-5.8,2.3-11.7,4.6-17.5,7c-4.5,3.2-11.7,14.4-15.4,19.2c-3.3,4.3-12.8,17.9-19.7,16.8c-0.1-0.4-0.2-0.8-0.2-1.2 c8.5-7.2,16.6-16.8,23-25.9c2.9-4.3,5.8-8.6,8.6-13c4-5,14.6-2,20.9-5c8.7-4.2,10.6-26.6,10.8-39.8c-0.2,0.1-0.3,0.2-0.5,0.2 c0.1,11.5-5.7,33.1-12.5,38.2c-3.5,2.5-11.4,0.7-15.6,2.6c-6.5,3.1-11,8.9-15.8,13.7c-3.4,3.4-17.4,19.8-22.6,16.3 c0.1-0.6,0.2-1.1,0.2-1.7c1.8-4.2,8.7-7.3,12.2-10.1c7.1-5.6,11.1-18.1,19.2-21.6c5.7-2.5,17.7-1.3,21.8-5.5 c4.7-4.7,5.4-13,7.2-20.6c5.2-22.5,2.1-53.2-2.4-74.6c-1.2-7.8-2.4-15.5-3.6-23.3c-8.5-28.1-29-46.3-45.8-66.2 c-9.4-11.2-17.4-23.2-26.2-35c-5.5-6.4-11-12.8-16.6-19.2c-14.6-19.3-29.3-38.6-43.9-57.8c-9.2-12.6-19.7-25.1-25.4-40.8 c-2.1-5.6-5.3-15.8-1-20.4C1083.6,643.2,1085.5,643.2,1087.5,642.3z"},
            {"name":"Rectus_Abdominus", "d":"M462.1,533.5c11.1,13.5,59.8,50.7,120,60.7 c34.7,5.8,129.7-8.9,148.6-16.1c18.8-7.2,147.7-65.9,163.2-74.6c15.5-8.8,179.7-95.4,204.2-96.2c24.5-0.9-3.5-9.5-10.1-13 c-6.6-3.5-48.5,4.3-71.5,14.2c-23,9.9-124.3,50.5-154.1,67.4c-29.7,16.9-58.5,46.2-142.1,56.2c-27.2,3.2-46.7,1.1-97.2,7 c-27.1,3.1-68.4,19.2-98.6,11.3c-30.2-7.9-74.6-38.6-74.6-38.6S450.9,520,462.1,533.5z"},
            {"name":"latissimus_dorsi", "d":"M943,280.1c16.1,11.8-1.9,36.1-8.9,45.1 c-13.1,16.9-30.2,31.5-47,44.6c-6.8,5.4-13.6,10.7-20.4,16.1c-11.3,1.9-22.6,3.8-33.8,5.8c3.4,4.4,6.7,8.8,10.1,13.2 c0,0.1,0,0.2,0,0.2c1.4,0-41.5,5.5-73.4,18c-42.6,16.6-105,50.4-97,46.1c-24.5,15.4-81.9,65.1-89,70.8c-6.1,4.9-14.4,10.7-18,18 c-0.9-1.1-26.7,13.4-82.3,22.6c-3.3,0.5-23,1.4-24.7-0.2c-5.4-7.3-6.8-18.3-10.3-27.4c-2.4-5.1-4.8-10.2-7.2-15.4 c5.8-0.9,10.8-7.1,13.9-11c63.1-85.8,67.1-109.3,74.6-127.4c4.6-12.6,9.1-25.3,13.7-37.9c3.6-11.3,7.2-22.6,10.8-33.8 c-5.7,1.6,71.2-19.5,115.4-31.2c8.6,1.8,30,2.4,51.4-0.7c31-4.5,82.7-13.4,122.4-18.5C935,265.1,938.6,276.8,943,280.1z"},
            {"name":"iliocostalis", "d":"M1043,274.1c-15.1,2.3-34.3,11.8-39.4,24.2 c-7.5,18.3-0.6,51.1,2.2,69.1c-0.3-0.1-58.5-12.6-85.7-22.1c-6.4-2.3-21.8-9.1-23.8-9.6c3.5,0.9-54.1-3.3-93.1-4.1 c-8.3-10.6-29.6-27.7-53.8-35.8c-0.6-0.2-1.3-0.1-1-0.7c69-15.8,123.2-18.9,193-22.3C997.8,271.2,1018,272.9,1043,274.1z"}
        ];

        var svgViewData = {
            "organ": {"viewBox":"0 0 1407.6 1201.7", "enablebackground":"new 0 0 1407.6 1201.7"},
            "tg": {"viewBox":"0 0 1447 1179.1", "enablebackground":"new 0 0 1447 1179.1"},
            "vec1": {"viewBox":"0 0 1447 1179.1", "enablebackground":"new 0 0 1447 1179.1"},
            "vec2": {"viewBox": "0 0 1447 1179.1", "enablebackground": "new 0 0 1447 1179.1"}
        };

        var imageData = {
            "organ": {"overflow":"visible", "width":"5865", "height":"5007", "source":"svgs/VECTORS_ORGANS.png",  "transform":"matrix(0.24 0 0 0.24 0 -1)"},
            "tg": {"overflow":"visible", "width":"6029", "height":"4913", "source":"svgs/VECTORS_TG_MUSCLES_REV.png",  "transform":"matrix(0.24 0 0 0.24 -1.421255e-03 -1.208173e-03)"},
            "vec1": {"overflow":"visible", "width":"6029", "height":"4913", "source":"svgs/VECTORS_2_Layer_DEEP_MUSCLES.png", "transform":"matrix(0.24 0 0 0.24 -1.421255e-03 -3.3801)"},
            "vec2": {"overflow":"visible", "width":"6029", "height":"4913", "source":"svgs/VECTORS_2_Layer_SUPERFICIAL_MUSCLES.png",  "transform":"matrix(0.24 0 0 0.24 0 0)"}
        };

        var svg =  d3.select("body")
                .append("svg")
                .attr("x", "0px")
                .attr("y", "0px")
                .attr("viewBox", function() {
                    return svgViewData[dogType]["viewBox"];
                })
                .attr("enable-background", function() {
                    return svgViewData[dogType]["enablebackground"];
                })
                .attr("xml:space", "preserve")
                .attr("class", function() {
                    return windowNumber;
                });
        var image = svg.append("image")
                .attr("overflow","visible")
                .attr("width",function() {
                    return imageData[dogType]["width"];
                })
                .attr("height", function() {
                    return imageData[dogType]["height"];
                })
                .attr("xlink:href", function() {
                    return imageData[dogType]["source"];
                })
                .attr("transform", function() {
                    return imageData[dogType]["transform"];
                });
        var group = svg.append("g").attr("id", function() {
            return groupid[dogType];
        });

        var paths = group.selectAll("path")
                .data(function() {
                    if (dogType === "organ") {
                        return organ_coordinates;
                    }
                    else if (dogType === "deep") {
                        return deep_muscle_coordinates;
                    }
                    else if (dogType === "middle") {
                        return middle_muscle_coordintes;
                    }
                    else if (dogType === "superficial") {
                        return superficial_coordinates;
                    }
                    else {
                        alert("NO DATA");
                    }
                })
                .enter()
                .append("path")
                .attr("d", function(d) {
                    return d.d;
                })
                .attr("id", function(d) {
                    return d.name;
                })
                .attr("class", dogNumber)
                .attr("fill", "none");
    }


</script>

</body>
</html>